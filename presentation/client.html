<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multiplayer</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <canvas id="screen" width="10" height="10"></canvas>
    <script src="https://cdn.socket.io/3.1.1/socket.io.min.js" integrity="sha384-gDaozqUvc4HTgo8iZjwth73C6dDDeOJsAgpxBcMpZYztUfjHXpzrpdrHRdVp8ySO" crossorigin="anonymous"></script>

    <script type="module">
        
        import {createGame, Player, Fruit} from './data.js'
        import createKeyboardListener from './input.js'
        import renderScreen from './renderer.js'
        const screen = document.getElementById("screen")
        const context  = screen.getContext("2d")
        var socket = io();
        const game = createGame()


        game.state.me.id = "player1"
        
        
        socket.on("connect", () => {
            console.log(socket.id); 
        });

        socket.on("open_game", (arg) => {
            game.gameLoad(arg)
        });


        var keyboardListener = createKeyboardListener(game)
        keyboardListener.subscribe(game.movePlayer)
        renderScreen(context, game.state, requestAnimationFrame)

    </script>
</body>
</html>